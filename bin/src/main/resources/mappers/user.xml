<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.winiaaid.domain.user.UserRepository">
    <insert id="insertUser" parameterType="com.project.winiaaid.domain.user.User">
    insert into
    	user_mst
    values(
    	#{user_code},
    	#{user_name},
    	#{user_id},
    	#{user_password},
    	#{user_email},
    	#{user_roles},
    	now(),
    	now()
    	
    );
	
    </insert>

    <select id="findUserByUsername" parameterType="String" resultType="com.project.winiaaid.domain.user.User">
	 select
	 	um.user_code,
		um.user_name,
		um.user_password,
		um.user_email,
		um.user_roles,
		
		ud.user_gender,
		ud.user_birth,
		ud.user_address,
		ud.postal_code,
		ud.main_address,
		ud.detail_address,
		ud.main_phonenumber,
		ud.sub_phonoenumber,
		ud.email_recieve_flag,
		ud.sms_recieve_flag,
		ud.mail_recieve_flag
	from
		user_mst um
		left outer join user_dtl ud on(ud.user_code = um.user_code)
	where
		um.user_id = #{user_id} 
		
		
    </select>
      

    <select id="findUserByEmail" parameterType="String" resultType="com.project.winiaaid.domain.user.User">

    </select>
</mapper>